<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Tutorial · Stripeline.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">Stripeline.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Introduction</a></li><li class="is-active"><a class="tocitem" href>Tutorial</a><ul class="internal"><li><a class="tocitem" href="#How-the-Strip-telescope-operates"><span>How the Strip telescope operates</span></a></li><li><a class="tocitem" href="#Pointing-generation"><span>Pointing generation</span></a></li></ul></li><li><a class="tocitem" href="../basic/">Basic functions</a></li><li><a class="tocitem" href="../instrumentdb/">Instrument database</a></li><li><a class="tocitem" href="../tod/">Time-ordered data</a></li><li><a class="tocitem" href="../scanning/">Scanning strategy</a></li><li><a class="tocitem" href="../acquisition/">Data acquisition</a></li><li><a class="tocitem" href="../mapmaking/">Map making</a></li><li><a class="tocitem" href="../simulation_tutorial/">Full-scale simulation tutorial</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Tutorial</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Tutorial</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/lspestrip/Stripeline.jl/blob/master/docs/src/tutorial.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Tutorial"><a class="docs-heading-anchor" href="#Tutorial">Tutorial</a><a id="Tutorial-1"></a><a class="docs-heading-anchor-permalink" href="#Tutorial" title="Permalink"></a></h1><p>In this tutorial, we present the basic facilities provided by the Stripeline framework.</p><h2 id="How-the-Strip-telescope-operates"><a class="docs-heading-anchor" href="#How-the-Strip-telescope-operates">How the Strip telescope operates</a><a id="How-the-Strip-telescope-operates-1"></a><a class="docs-heading-anchor-permalink" href="#How-the-Strip-telescope-operates" title="Permalink"></a></h2><p>Stripeline provides the tools necessary to simulate the behavior of the Strip instrument as if it were operated at the site in Tenerife (Spain). The instrument is an array of microwave detectors observing the sky in two frequency bands: 43 GHz (Q-band) and 90 GHz (W-band). The telescope does not stand still, but it performs a continuous rotation around its azimuthal axis, as it is shown in the following video:</p><iframe 
    width="560" 
        height="315" 
    src="https://www.youtube.com/embed/01P_5aCmST0" 
    frameborder="0" 
    allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" 
    allowfullscreen>
</iframe><p>To simulate the observation of the sky, Stripeline computes the projected direction of the main axis of the telescope (the red beam in the video above) after it has been tilted (first part of the video) and rotated far from the vertical axis (zenith), in the last part of the video. Stripeline considers also the rotation of the Earth, which causes the celestial sphere to rotate as time passes.</p><p>To compute the position of the telescope axis in the sky, we can use the <a href="../scanning/#Stripeline.genpointings"><code>genpointings</code></a> function. This function takes the time of observation and produces a set of «pointings», i.e., a set of angles that specify the direction and orientation of the telescope axis in the sky. If you watch the video above once again, you will realize that the direction in the sky depends on several quantities:</p><ol><li>How much the telescope is tilted with respect to the vertical axis  (zenith)</li><li>How much the telescope has rotated with respect to the ground  (azimuth)</li><li>What is the position of the Earth.</li></ol><h2 id="Pointing-generation"><a class="docs-heading-anchor" href="#Pointing-generation">Pointing generation</a><a id="Pointing-generation-1"></a><a class="docs-heading-anchor-permalink" href="#Pointing-generation" title="Permalink"></a></h2><p>Nominally, the azimuth motor makes the Strip telescope rotate once every minute. Stripeline provides an handy function, [<code>timetorotang</code>] that computes the angle (in radians) of the azimuth axis, given the time in seconds and the rotation speed (in Rotations Per Minute, i.e., RPM):</p><pre><code class="language-julia">using Stripeline

# What&#39;s the azimuth angle after 5 seconds,
# if the telescope spins once every minute?
timetorotang(5.0, 1) |&gt; rad2deg</code></pre><pre class="documenter-example-output">29.999999999999996</pre><p>An important feature of Stripeline is that all angles are expressed in radians, unless otherwise noted. This permits to use these angles in trigonometric functions like <code>sin</code> and <code>cos</code> without the need to convert them. In the example above, we used Julia&#39;s standard function <code>rad2deg</code> to convert the value to degrees.</p><p>The detectors used by Strip operate continuously, taking 100 measurements each second, so if we run a simulation lasting one minute (from 0 to 60 s), we will collect 6,001 samples:</p><pre><code class="language-julia">time_samples = 0.0:0.01:60.0
dirs, psi = genpointings([0, 0, 1], time_samples) do time_s
    return (0.0, deg2rad(20.0), timetorotang(time_s, 1))
end

(size(dirs), size(psi))</code></pre><pre class="documenter-example-output">((6001, 2), (6001,))</pre><p>The variable <code>time_samples</code> is a <a href="https://docs.julialang.org/en/v1/base/math/#Base.range">range</a>, containing the values <code>0, 0.01, 0.02, 0.03, …, 59.99, 60.0</code> in compact form. The call to <code>genpointings</code> uses the <a href="https://docs.julialang.org/en/v1/manual/functions/#man-anonymous-functions-1"><code>do</code> syntax</a> to specify an anonymous function that takes the time <code>time_s</code> as input and returns a tuple of three values: the boresight angle (<code>0.0</code>), the angular distance from the zenith (20°), and the azimuthal angle of the ground motor. (Note that in Julia you can avoid the <code>return</code> in the last statement of a function; we have explicitly written it in this example for the sake of clarity.)</p><p>We can plot the colatitude, the longitude, and the orientation as a function of time using the <code>plot</code> function from the <a href="https://github.com/JuliaPlots/Plots.jl">Plots.jl</a> package:</p><pre><code class="language-julia">using Plots
plot(
    plot(time_samples, rad2deg.(dirs[:, 1]), label = &quot;Colatitude&quot;),
    plot(time_samples, rad2deg.(dirs[:, 2]), label = &quot;Longitude&quot;),
    plot(time_samples, rad2deg.(psi), label = &quot;Orientation&quot;),
    layout = (3, 1), size = (600, 800),
)</code></pre><p><img src="../coordinates.svg" alt/></p><p>If you inspect these plots, you will see the behavior of the video at the top of this page:</p><ol><li>The colatitude fluctuates around the mean value 28°, which is  Tenerife&#39;s latitude. The amplitude of the fluctuation is 20°,  which is the angle between the Zenith and the red beam pointing  towards the sky.</li><li>The longitude oscillates around the value 0°, and its amplitude is  20° again;</li></ol></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Introduction</a><a class="docs-footer-nextpage" href="../basic/">Basic functions »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.3 on <span class="colophon-date" title="Monday 5 September 2022 07:19">Monday 5 September 2022</span>. Using Julia version 1.6.7.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
